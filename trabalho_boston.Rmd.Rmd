---
title: "Trabalho - Análise de Dados com R"
author: ""
output:
  pdf_document:
    latex_engine: xelatex
---

# Introdução

Este documento apresenta uma análise exploratória e modelagem preditiva utilizando o dataset `boston.csv`, conforme as instruções fornecidas. O objetivo é realizar:

1. Análise exploratória dos dados.
2. Ajuste de um modelo de regressão linear.
3. Diagnóstico do modelo.
4. Geração de um relatório em PDF.

# Instruções

As etapas seguidas neste trabalho foram:

1. **Análise Exploratória de Dados (EDA):**
   - Inspecionar os dados.
   - Criar gráficos para entender relações e distribuições.

2. **Preparação dos Dados:**
   - Tratar valores ausentes e transformar variáveis, se necessário.

3. **Construção do Modelo:**
   - Ajustar um modelo de regressão linear múltipla.
   - Aplicar técnicas de seleção de variáveis.

4. **Avaliação e Diagnóstico:**
   - Verificar normalidade dos resíduos, multicolinearidade e pontos influentes.

5. **Relatório Final:** Compilado em formato PDF.

# Código R

```{r}
# Carregar pacotes necessários
library(tidyverse)
library(skimr)
library(corrplot)
library(car)
library(broom)
library(knitr)
library(kableExtra)
library(rmarkdown)

# 1. Carregar e explorar os dados
boston <- read.csv("boston.csv")

# Resumo estatístico
summary(boston)
skim(boston)

# Mapa de calor para correlação
cor_matrix <- cor(boston)
corrplot(cor_matrix, method = "color", tl.cex = 0.7)

# Gráficos exploratórios
ggplot(boston, aes(x = MEDV)) + 
  geom_histogram(binwidth = 1, fill = "blue", color = "white") +
  ggtitle("Distribuição da Variável medv")

ggplot(boston, aes(x = LSTAT, y = MEDV)) + 
  geom_point(alpha = 0.5) + 
  geom_smooth(method = "lm", se = FALSE, color = "red") +
  ggtitle("medv vs lstat")

# 2. Preparação dos dados
# Verificar valores ausentes
sum(is.na(boston))

# Verificar e ajustar distribuições (exemplo de transformação log)
boston$LSTAT_log <- log(boston$LSTAT + 1)

# 3. Modelo de Regressão Linear
modelo <- lm(MEDV ~ ., data = boston)
summary(modelo)

# Seleção de variáveis (Stepwise)
modelo_step <- step(modelo, direction = "both")
summary(modelo_step)

# 4. Diagnósticos do modelo
par(mfrow = c(2, 2))
plot(modelo_step)

# Multicolinearidade
vif_model <- vif(modelo_step)
vif_model

# Resíduos e normalidade
shapiro.test(residuals(modelo_step))
qqnorm(residuals(modelo_step))
qqline(residuals(modelo_step))

# Pontos influentes
influence <- cooks.distance(modelo_step)
ggplot(data.frame(obs = 1:length(influence), influence), aes(x = obs, y = influence)) +
  geom_bar(stat = "identity") +
  ggtitle("Cooks Distance para Pontos Influentes")


```

